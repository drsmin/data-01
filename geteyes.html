<html>
    <body onload="action_app_geteyes()">
        
    </body>

    <script>
        var getParameter = function (param) { var returnValue; var url = location.href; var parameters = (url.slice(url.indexOf('?') + 1, url.length)).split('&'); for (var i = 0; i < parameters.length; i++) { var varName = parameters[i].split('=')[0]; if (varName.toUpperCase() == param.toUpperCase()) { returnValue = parameters[i].split('=')[1]; return decodeURIComponent(returnValue); } } };
        var userAgent = navigator.userAgent;    

        function mo_chk() {
            var os;
            var mobile = (/iphone|ipad|ipod|android/i.test(navigator.userAgent.toLowerCase()));	 
            
            if (mobile) {
                var userAgent = navigator.userAgent.toLowerCase();
                if (userAgent.search("android") > -1) {
                    return os = "android";
                } else if ((userAgent.search("iphone") > -1) || (userAgent.search("ipod") > -1) || (userAgent.search("ipad") > -1)) {
                    return os = "ios";
                } else {
                    return os = "otehr";
                }
        
            } else {
                return os = "pc";
            }
        }
            
        function action_app_geteyes() {
            var result_mo_chk = mo_chk();
        
            if ("pc" == result_mo_chk) {
                alert("PC에서는 사용할 수 없습니다");
                return;
            } else {
                if ("ios" == result_mo_chk) {
                    alert("IOS에서는 사용할 수 없습니다");
                } else if ("android" == result_mo_chk) {

                    var customUrl = "geteyes://action=" + getParameter("action") + ",seq=" + getParameter("seq");

                    if (userAgent.match(/Chrome/)) {

                        // 안드로이드의 크롬에서는 intent만 동작하기 때문에 intent로 호출해야함
                        setTimeout(function() {
                            location.href = "intent://" + customUrl + "#Intent; scheme=geteyes; action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE; package=com.leadwalk.geteyes; end;";
                            //location.href = "intent://" + customUrl + "#Intent; scheme=geteyes; package=com.leadwalk.geteyes; end;";
                            //location.href = customUrl;
                        }, 1000);
                    } else {

                        // 크롬 이외의 브라우저들
                        setTimeout(

                        function() {
                            if ((new Date()).getTime() - visitedAt < 2000) {
                                location.href = "https://play.google.com/store/apps/details?id=com.leadwalk.geteyes";
                            }
                        }, 500);

                        var iframe = document.createElement('iframe');
                        iframe.style.visibility = 'hidden';
                        iframe.src = customUrl;
                        document.body.appendChild(iframe);
                        document.body.removeChild(iframe); // back 호출시 캐싱될 수 있으므로 제거

                    }
                }
            }
        }
    </script>

</html>
